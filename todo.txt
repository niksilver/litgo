To do
-----

Sections
- Keep track of a contents list (section and its name)
- Add a directive for including the contents list
- Enable each section to be linkable
- Link from each section reference to the section
- Warning when a section jumps a level (e.g. 1 to 3, or nothing to 2)

Chunks
- Line directives mustn't be indented without a %i
- Select line directives on the command line.

Directives
- Add a dummy "ignore" directive just to make sure line numbers
  don't get corrupted.

I/O
- Write markup to a file specified by the command line
- Write markup to stdout

Done
----

Sections
- Track current section
- Add section number to markdown headings
- Add text after chunk "Added to in sections X, Y and Z"
- Remove the current section from the list "Added to in..."
- Add text after chunk "Used in sections X, Y and Z"
- For "Used in..." make sure the sections come out in order.

Refactoring
- Put the lattice into the state.
- Rearrange the design doc to present more of a design.

I/O
- Read from a file specified by the command line
- Read from stdin
- Write code to files

Chunks
- HTML code chunks have the language suffix for code highlighting
